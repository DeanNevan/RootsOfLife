[gd_scene load_steps=17 format=3 uid="uid://dvuqeam713wd4"]

[ext_resource type="Script" path="res://src/main/MainGame/MainGame.gd" id="1_72ykg"]
[ext_resource type="PackedScene" uid="uid://diih20og4coqe" path="res://src/main/MainGame/Seed/Seed.tscn" id="2_sdm1l"]
[ext_resource type="Script" path="res://src/main/MainGame/LabelFPS.gd" id="3_2lsnb"]
[ext_resource type="PackedScene" uid="uid://bbk15m06vn7sr" path="res://src/main/MainGame/MainGameUI/MainGameUI.tscn" id="3_6e0bd"]
[ext_resource type="PackedScene" uid="uid://bvm1hp8yogdeq" path="res://src/main/MainGame/MainGameBG/MainGameBG.tscn" id="3_pc0ol"]
[ext_resource type="Script" path="res://src/main/MainGame/MainCamera.gd" id="5_lvrwb"]
[ext_resource type="PackedScene" uid="uid://cp0hpvpqcv20m" path="res://src/main/MainGame/GameWorld/instances/Test/GameWorldTest.tscn" id="6_wqi6f"]
[ext_resource type="PackedScene" uid="uid://ceeenkwxk5d0q" path="res://src/main/Plant/Plant.tscn" id="7_3m3eh"]
[ext_resource type="PackedScene" uid="uid://dn0k7nhdqt3jr" path="res://src/main/MainGame/MainGameFX/MainGameFog.tscn" id="9_03237"]
[ext_resource type="PackedScene" uid="uid://f6cl7tnsorts" path="res://src/main/MainGame/MainGameFX/FogTileMap.tscn" id="10_utkpj"]
[ext_resource type="Script" path="res://src/main/MainGame/MainGameFX/FogTileMap.gd" id="11_em57f"]

[sub_resource type="LabelSettings" id="LabelSettings_vffmr"]
font_size = 32

[sub_resource type="LabelSettings" id="LabelSettings_brmlh"]
font_size = 64

[sub_resource type="Shader" id="Shader_3uikh"]
code = "// NOTE: Shader automatically converted from Godot Engine 4.0.beta17's CanvasItemMaterial.

shader_type canvas_item;
render_mode blend_mix;

uniform vec4 color : source_color;

void fragment() {
	COLOR.a = 1.0;
	float a = texture(TEXTURE, UV).r;
	COLOR.a = 1.0 - a;
	COLOR.rgb = color.rgb;
}"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_j3r8k"]
shader = SubResource("Shader_3uikh")
shader_parameter/color = Color(1, 1, 1, 1)

[sub_resource type="ViewportTexture" id="ViewportTexture_s3j1u"]
viewport_path = NodePath("MainGameFog")

[node name="MainGame" type="Node2D"]
script = ExtResource("1_72ykg")
game_world_node_path = NodePath("GameWorldTest")

[node name="Seed" parent="." instance=ExtResource("2_sdm1l")]
unique_name_in_owner = true

[node name="MainGameBG" parent="." instance=ExtResource("3_pc0ol")]

[node name="LayerUI" type="CanvasLayer" parent="."]
layer = 2

[node name="LabelSeed" type="Label" parent="LayerUI"]
unique_name_in_owner = true
visible = false
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -32.0
offset_top = -22.5
offset_right = 32.0
offset_bottom = 22.5
grow_horizontal = 2
grow_vertical = 2
text = "按下Space释放种子"
label_settings = SubResource("LabelSettings_vffmr")
horizontal_alignment = 1
vertical_alignment = 1

[node name="LabelSeedRE" type="Label" parent="LayerUI"]
unique_name_in_owner = true
visible = false
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -32.0
offset_top = -22.5
offset_right = 32.0
offset_bottom = 22.5
grow_horizontal = 2
grow_vertical = 2
text = "按下Space回收种子，重新释放"
label_settings = SubResource("LabelSettings_vffmr")
horizontal_alignment = 1
vertical_alignment = 1

[node name="LabelTest" type="Label" parent="LayerUI"]
visible = false
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -11.5
offset_right = 20.0
offset_bottom = 11.5
grow_horizontal = 2
grow_vertical = 2
label_settings = SubResource("LabelSettings_brmlh")
horizontal_alignment = 1
vertical_alignment = 1

[node name="MainGameUI" parent="LayerUI" instance=ExtResource("3_6e0bd")]
mouse_filter = 2

[node name="LabelFPS" type="Label" parent="LayerUI"]
offset_right = 40.0
offset_bottom = 23.0
script = ExtResource("3_2lsnb")

[node name="GameWorldTest" parent="." instance=ExtResource("6_wqi6f")]

[node name="Plant" parent="." instance=ExtResource("7_3m3eh")]
unique_name_in_owner = true

[node name="CameraOrigin" type="Node2D" parent="."]

[node name="MainCamera" type="Camera2D" parent="CameraOrigin"]
unique_name_in_owner = true
position_smoothing_speed = 50.0
script = ExtResource("5_lvrwb")
MAX_ZOOM = 5.0
MIN_ZOOM = 0.3
movement_gesture = 2

[node name="MainGameFog" parent="." instance=ExtResource("9_03237")]
disable_3d = true
transparent_bg = true
initial_visibility_path = NodePath("Polygon2D2")
following_camera_path = NodePath("../CameraOrigin/MainCamera")

[node name="Polygon2D2" type="Polygon2D" parent="MainGameFog"]
z_index = 1
z_as_relative = false
position = Vector2(-68, 126)
polygon = PackedVector2Array(-747, 13, -1322, 11, -1286, -605, -926, -1192, -258, -1441, 310, -1438, 902, -1219, 1356, -728, 812, -477, 652, -323, 555, 7.00002, 363, 10)

[node name="Line2D" type="Line2D" parent="MainGameFog"]
z_as_relative = false
default_color = Color(0.498039, 0.498039, 0.498039, 1)
begin_cap_mode = 1
end_cap_mode = 1

[node name="Node" type="CanvasLayer" parent="."]
visible = false

[node name="TextureRect" type="TextureRect" parent="Node"]
material = SubResource("ShaderMaterial_j3r8k")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
texture = SubResource("ViewportTexture_s3j1u")

[node name="FogTileMap" parent="." instance=ExtResource("10_utkpj")]
layer_0/tile_data = PackedInt32Array(65545, 0, 0, 65546, 0, 0, 65547, 0, 0, 65544, 0, 0, 65543, 0, 0, 65542, 0, 0, 65541, 0, 0, 65540, 0, 0, 65539, 0, 0, 131074, 0, 0, 131073, 0, 0, 131072, 0, 0, 196607, 0, 0, 196606, 0, 0, 196605, 0, 0, 196604, 0, 0, 196603, 0, 0, 196602, 0, 0, 196601, 0, 0, 196600, 0, 0, 196599, 0, 0, 196598, 0, 0, 196597, 0, 0, 196596, 0, 0, 131060, 0, 0, 131061, 0, 0, 131062, 0, 0, 131063, 0, 0, 131064, 0, 0, 131065, 0, 0, 131066, 0, 0, 131067, 0, 0, 131068, 0, 0, 131069, 0, 0, 131070, 0, 0, 131071, 0, 0, 65536, 0, 0, 65537, 0, 0, 65538, 0, 0, 131080, 0, 0, 131081, 0, 0, 131082, 0, 0, 131083, 0, 0, 131079, 0, 0, 131078, 0, 0, 131077, 0, 0, 131076, 0, 0, 131075, 0, 0, 262142, 0, 0, 262141, 0, 0, 262140, 0, 0, 262139, 0, 0, 262138, 0, 0, 262137, 0, 0, 262136, 0, 0, 262135, 0, 0, 262134, 0, 0, 262133, 0, 0, 262132, 0, 0, 262143, 0, 0, 196608, 0, 0, 196609, 0, 0, 196610, 0, 0, 196611, 0, 0, 196612, 0, 0, 196613, 0, 0, 196614, 0, 0, 196615, 0, 0, 196616, 0, 0, 196617, 0, 0, 196618, 0, 0, 196619, 0, 0, 262155, 0, 0, 262154, 0, 0, 262153, 0, 0, 262152, 0, 0, 262151, 0, 0, 262150, 0, 0, 262149, 0, 0, 262148, 0, 0, 262147, 0, 0, 262146, 0, 0, 262145, 0, 0, 262144, 0, 0, 327679, 0, 0, 327678, 0, 0, 327677, 0, 0, 327676, 0, 0, 327675, 0, 0, 327674, 0, 0, 327673, 0, 0, 327672, 0, 0, 327671, 0, 0, 327670, 0, 0, 327669, 0, 0, 327668, 0, 0, 393204, 0, 0, 393205, 0, 0, 393206, 0, 0, 393207, 0, 0, 393208, 0, 0, 393209, 0, 0, 393210, 0, 0, 393211, 0, 0, 393212, 0, 0, 393213, 0, 0, 393214, 0, 0, 393215, 0, 0, 327680, 0, 0, 327681, 0, 0, 327682, 0, 0, 327683, 0, 0, 327684, 0, 0, 327685, 0, 0, 327686, 0, 0, 327687, 0, 0, 327688, 0, 0, 327689, 0, 0, 327690, 0, 0, 327691, 0, 0, 393227, 0, 0, 393226, 0, 0, 393225, 0, 0, 393224, 0, 0, 393223, 0, 0, 393222, 0, 0, 393221, 0, 0, 393220, 0, 0, 393219, 0, 0, 393218, 0, 0, 393217, 0, 0, 393216, 0, 0, 458751, 0, 0, 458750, 0, 0, 458749, 0, 0, 458748, 0, 0, 458747, 0, 0, 458746, 0, 0, 458745, 0, 0, 458744, 0, 0, 458743, 0, 0, 458742, 0, 0, 458741, 0, 0, 458740, 0, 0, 524276, 0, 0, 524277, 0, 0, 524278, 0, 0, 524279, 0, 0, 524280, 0, 0, 458763, 0, 0, 458762, 0, 0, 458761, 0, 0, 458760, 0, 0, 458759, 0, 0, 458758, 0, 0, 458757, 0, 0, 458756, 0, 0, 458755, 0, 0, 458754, 0, 0, 458753, 0, 0, 458752, 0, 0, 524287, 0, 0, 524286, 0, 0, 524285, 0, 0, 524284, 0, 0, 524283, 0, 0, 524282, 0, 0, 524281, 0, 0, 589812, 0, 0, 589813, 0, 0, 589814, 0, 0, 589815, 0, 0, 589816, 0, 0, 589817, 0, 0, 589818, 0, 0, 589819, 0, 0, 589820, 0, 0, 589821, 0, 0, 589822, 0, 0, 589823, 0, 0, 524288, 0, 0, 524289, 0, 0, 524290, 0, 0, 524291, 0, 0, 524292, 0, 0, 524293, 0, 0, 524294, 0, 0, 524295, 0, 0, 524296, 0, 0, 524297, 0, 0, 524298, 0, 0, 524299, 0, 0, 655371, 0, 0, 655370, 0, 0, 655369, 0, 0, 655368, 0, 0, 655367, 0, 0, 655366, 0, 0, 589829, 0, 0, 589828, 0, 0, 589827, 0, 0, 589826, 0, 0, 589825, 0, 0, 589824, 0, 0, 655360, 0, 0, 720895, 0, 0, 720894, 0, 0, 720893, 0, 0, 720892, 0, 0, 720891, 0, 0, 720890, 0, 0, 720889, 0, 0, 720888, 0, 0, 720887, 0, 0, 720886, 0, 0, 720885, 0, 0, 720884, 0, 0, 655348, 0, 0, 655349, 0, 0, 655350, 0, 0, 655351, 0, 0, 655352, 0, 0, 655353, 0, 0, 655354, 0, 0, 655355, 0, 0, 655356, 0, 0, 655357, 0, 0, 655358, 0, 0, 655359, 0, 0, 589830, 0, 0, 589831, 0, 0, 589832, 0, 0, 589833, 0, 0, 589834, 0, 0, 589835, 0, 0, 655365, 0, 0, 655364, 0, 0, 655363, 0, 0, 655362, 0, 0, 655361, 0, 0, 786422, 0, 0, 786421, 0, 0, 786420, 0, 0, 786423, 0, 0, 786424, 0, 0, 786425, 0, 0, 786426, 0, 0, 786427, 0, 0, 786428, 0, 0, 786429, 0, 0, 786430, 0, 0, 786431, 0, 0, 720896, 0, 0, 720897, 0, 0, 720898, 0, 0, 720899, 0, 0, 720900, 0, 0, 720901, 0, 0, 720902, 0, 0, 720903, 0, 0, 720904, 0, 0, 720905, 0, 0, 720906, 0, 0, 720907, 0, 0, 786442, 0, 0, 786441, 0, 0, 786440, 0, 0, 786439, 0, 0, 851959, 0, 0, 851958, 0, 0, 851957, 0, 0, 851956, 0, 0, 851960, 0, 0, 851961, 0, 0, 851962, 0, 0, 851963, 0, 0, 851964, 0, 0, 851965, 0, 0, 851966, 0, 0, 851967, 0, 0, 786432, 0, 0, 786433, 0, 0, 786434, 0, 0, 786435, 0, 0, 786436, 0, 0, 786437, 0, 0, 786438, 0, 0, 786443, 0, 0)
script = ExtResource("11_em57f")

[connection signal="seed_ok" from="Seed" to="." method="_on_seed_seed_ok"]
[connection signal="building_canceled" from="LayerUI/MainGameUI" to="." method="_on_main_game_ui_building_canceled"]
[connection signal="building_requested" from="LayerUI/MainGameUI" to="." method="_on_main_game_ui_building_requested"]
